# Front End Web Development

Spark Boulder, Fall 2016

Session 18: **The Session Strikes Back**

Advanced Topics: Back End Web Development with Node.js

--------------------------------------------------------------------------------

# THE END IS NIGH

We're approaching the end of the class!

![](http://i.imgur.com/61Bms.gif)

On August 24th at 9pm (1 week after the class ends), report cards get generated!

Report cards include grades on all assignments, attendance, and links to projects:

-   Portfolio (assignment 4)
-   Client Project (assignment 9)
-   TSA Randomizer (assignment 14)
-   Random Quote App (assignment 19)

Remember to check your grades with `grades` on @classbot!

Remember to create separate Firebase apps (or site44 apps) for your projects so that potential clients employers can see them!

--------------------------------------------------------------------------------

# The Social Network Front End Project

For your final project, I'm going to have you create the **front end** to the Spark Front End Web Development Social Network.

All of the students in the class are on the Social Network! You can create new posts, and everyone else in the Social Network can see those posts.

For your front end,  you'll need at least 2 pages:

-   a **main page** which shows all the posts in the Social Network
    -   The main page (probably your `index.html`) should show all the posts in the Social Network, from most recent to least recent. Each post has some content, an author, and a date/time that it was created.
-   a **secret posting page** that lets you post to the Social Network
    -   Your posting page should have a text box where you can punch in some content, and then a button that lets you create a post on the Social Network. **Your posting page should be secret! Only you should know the URL for it, otherwise other people will be able to post to your profile.**

You'll need to make requests to the API to create and get posts on the Social Network. All of the API documentation is up at <https://spark-class-social-network-api.hoff.tech/>.

Some notes:

-   Your `profile_id` is just your Slack username.
-   You'll need a `profile_secret` in order to post to the Social Network. I'll direct message you your `profile_secret` in Slack.
-   Don't share your `profile_secret` with anyone, and don't share the URL of your posting page with anyone, or else they'll be able to post to your profile as you!
-   Don't put your `profile_secret` anywhere in your `index.html`, and don't include it in any scripts that are included in your `index.html` - otherwise, I'll be able to open that script and find it.
-   Use common sense when creating a post on the Social Network. I'm not moderating it at all, but keep it PG-13 please.
-   Use common sense when using the Social Network API. It can pretty easily handle 1000s of posts, but it doesn't have any restrictions on the amount of posts that you can create, or how often you create posts. If you write a `for` loop that does nothing but create spam posts all day, then I'm going to be sad :(

Logistics:

-   Remember to create a separate site44 site, and keep it up after the class ends so that potential clients and employers can see it!
-   Submit your site44 site for [assignment 19](/assignments/19).
-   This info is available on [readings 19](/readings/19) and [assignment 19](/assignments/19).
-   Ask for help! I just wrote this thing, so if something's not so clear, I can definitely improve it. Let me know!

--------------------------------------------------------------------------------

# Internships + end-of-class survey

<https://goo.gl/forms/0Nvw57KlcOCYSSLW2>

You donâ€™t have to do this right now, but if youâ€™re interested, be sure to do it before August 24th at 9pm (1 week after the class ends).

If you're interested in getting an internship with Spark's help, select the "I'm seeking an internship in a related field" option at the bottom of the survey. It'll ask you some more questions about what kind of internship you're interested in.

## The CU CS Jobs list

Sign up for the CU CS jobs mailing list! I usually get 5-10 leads a week through there.

<http://www.colorado.edu/cs/job-opportunities/jobs-mailing-list>

--------------------------------------------------------------------------------

# Google Tour

It's on! We're touring Google Boulder at 10am on Friday, August 19th.

**If you're planning on coming, you need to confirm with me on Slack by 8am, Tuesday, August 16th.** If you don't confirm with me, you won't be able to go on the tour. Google's pretty strict on names and lists and stuff.

## Tour day

**Weâ€™re meeting in the lobby of Google BLD 2590 at 10am on Friday, August 19th. Please be on time!**

There are multiple Google buildings in Boulder!

Weâ€™re meeting in the lobby of the one on the SW corner of 26th and Pearl. (Google Bldg 2590)

Parking is available all around that building (2590), and any parking designated for Google is available for guests. However, if you can't find any parking, I usually park in the lots on the SE corner of 26th and Pearl - sort of between Hazel's and the Pho place.

If you need a ride, please let us know! Coordinate in #general on Slack. Iâ€™m available to give rides, and other students may be too.

<iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3055.421196739891!2d-105.2633717841653!3d40.021374587512!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x876bedd5d002a329%3A0x37fe387aa4a4eb7b!2sGoogle+Boulder!5e0!3m2!1sen!2sus!4v1470877300005" width="400" height="300" frameborder="0" style="border:0" allowfullscreen></iframe>

--------------------------------------------------------------------------------

# More dumb fun web stuff

Really, really cool one today!

<http://xkcd.com/1663>

When you load the page, you get a fragment appended to the URL (a fragment is the # bit). This creates a new game, and sends some information off to the server, including unique info about your browser, so you can share a read-only URL with others. Every time you edit the page, it sends your edits to the server, and the server runs your garden continuously.

<http://xkcd.com/1663/#55944f62-fa9b-11e5-8001-42010a8e0010>

When you load a URL that already has a fragment, it loads up that specific game, and the controls if youâ€™re accessing it from the original browser.

More from this guy + xkcd collab: <http://chromakode.com/post/notes-on-xkcd-pixels>

--------------------------------------------------------------------------------

# Advanced Topics: Back End Web Development with Node.js!

![](https://media.giphy.com/media/svPcbkauC0meA/giphy.gif)

--------------------------------------------------------------------------------

# Node.js

You know how we can run JavaScript in the browser?

We can also run JavaScript in **Node.js**!

Things look a little different between the two:

-   In the browser, you get some builtin variables/objects, like `document` and `window`
-   In Node, you get a whole different bunch of builtin variables/objects, like `fs` and `require`

> _Node.js is built on top of the [V8 JavaScript engine](https://developers.google.com/v8/)! V8 takes JavaScript code and turns it into machine code (pure hexadecimal code, instructions for the CPU to execute)_

--------------------------------------------------------------------------------

# Running JavaScript with Node.js

**Create a new directory** with a file `index.js` in it, and put the following in `index.js`:

```javascript
console.log("Hello, this is running from Node.js!");
```

Then, open up your command line (Terminal, Git Bash, Powershell or cmd.exe) and navigate into the directory that contains your `index.js`.

> _(remember, on Mac OS X or Git Bash, use `cd`, `ls`, and `pwd` to navigate)_

Once you're in the correct directory, run `node index.js`.

--------------------------------------------------------------------------------

# Listening for HTTP requests with Express

To listen for incoming HTTP requests, weâ€™ll use a library called [Express](http://expressjs.com/). It turns our little node script into a web server!

## Install Express

Before we can use Express in our project, we need to set up our Node "app" and install Express next to our app. No CDN's here, sorry!

On the command line, inside the directory that contains your `index.js`, run the following commands:

-   `npm init` (then just hit enter a bunch - all of the defaults in this case should be fine)
-   `npm install express --save`

> _Note: while it will work without it, `--save` is required for deploying to Modulus (more on that later)_

--------------------------------------------------------------------------------

# Initializing Express and telling it to be a web server

Inside of your `index.js`:

```javascript
var express = require("express");
var app = express();
app.listen(process.env.PORT || 1234);
```

This tells express to start "listening" on port 1234 (or, whatever port Modulus assigns. More on Modulus later)

Run the script again with `node index.js` - what happens on the command line?

To "kill" your server and go back to the command line, press `ctrl-C`.

--------------------------------------------------------------------------------

# Receiving HTTP requests

Now, let's tell the server to respond when someone tries to get the root path, or `/`:

```javascript
var express = require("express");
var app = express();

app.get("/", function(request, response) {
	console.log("hey! something happened!");
})

app.listen(process.env.PORT || 1234);
```

Restart your server by killing (`ctrl-C`) and rerunning (`node index.js`) your script.

Then, open a browser and go to <http://localhost:1234/>. What happens in the browser? What happens on your command line?

> _Why do we need to kill and restart the server every time we change the code?_

--------------------------------------------------------------------------------

# Sending data back in response

Now, let's tell the server to send something back in response every time someone tries to get the root path (`/`):

```javascript
var express = require("express");
var app = express();

app.get("/", function(request, response) {
	console.log("hey! something happened!");
	response.send("client says what?");
})

app.listen(process.env.PORT || 1234);
```

Restart your server again, then try to go to <http://localhost:1234/>. What do you see?

--------------------------------------------------------------------------------

# Getting info from the URL

Let's make it a little more complicated by getting some info from the URL:

```javascript
var express = require("express");
var app = express();

app.get("/", function(request, response) {
	console.log("hey! something happened!");
	response.send("client says what?");
})

app.get("/hello/:name", function(request, response) {
	response.send("Hello, " + request.params.name + "!")
})

app.listen(process.env.PORT || 1234);
```

Restart, and go to <http://localhost:1234/hello/yourname>. What happens?

--------------------------------------------------------------------------------

# A whole new hosting platform: Modulus

Weâ€™re going to use [Modulus](https://modulus.io/) to host our Node.js code. Itâ€™s a little like Firebase, but runs Node.js apps instead!

Normally itâ€™s not free, but they give you a $15 credit when you sign up, and they donâ€™t require payment info. That should be enough to host a tiny server full-time for 2 months - more than enough for what weâ€™re doing in the class!

--------------------------------------------------------------------------------

# Getting Started with Modulus

## Install the Modulus command line tools:

On the command line, run:

`npm install modulus -g`

If you get an error with that, try:

`sudo npm install modulus -g`

(you'll have to type in your password)

## Sign up for Modulus

On the command line, run:

`modulus signup`

> _(pretty cool that you can sign up from the command line, right?)_

--------------------------------------------------------------------------------

# Create a new Modulus project

On the command line, navigate to your project folder, then run:

`modulus project create`

Name it whatever you like!

When asked for the runtime, select `Node.js`.

When asked for the servo size, enter `192`.

--------------------------------------------------------------------------------

# Deploy your Node.js app to Modulus

On the command line, in your project folder, run:

`modulus deploy`

Confirm that youâ€™re deploying the right app, and hit `enter`!

(sit and wait for a minute or two)

Then, navigate to your app in the browser (something like <http://yourappnamehere-12345.onmodulus.net>) and check that everything is working as expected.

Marvel at your unlimited cosmic power!

![](https://media.giphy.com/media/EbNRa9eE9YHni/giphy.gif)

--------------------------------------------------------------------------------

# Debugging Modulus

If your Modulus stuff isnâ€™t working, try running `modulus logs`. It might give you a clue as to whatâ€™s broken!

-   Are you in the right directory?
-   Did you run `npm init` and `npm install express --save` in the right directory?
-   Did you run `modulus deploy` from the right directory?

--------------------------------------------------------------------------------

# That's all I've got for today!

What questions are there?

![](http://24.media.tumblr.com/tumblr_m0jcuyvWwq1rqfhi2o1_250.gif)

--------------------------------------------------------------------------------

# How to be a Web Developer

1.  Look stuff up on the internet
2.  Make stuff
3.  Repeat

![](https://media.giphy.com/media/23TDB4WDYqNji/giphy.gif)

--------------------------------------------------------------------------------

# Excelsior! ðŸš€
