# Front End Web Development

Spark Boulder, Summer 2016

Session 18: **The Session Strikes Back**

Advanced Topics: Back End Web Development with Node.js

---------


More dumb fun web stuff
I‚Äôm not sure, but I think I know how this works:
http://xkcd.com/1663
When you load the page, you get a fragment appended to the URL (a fragment is the # bit). This creates a new game, and sends some information off to the server, including unique info about your browser, so you can share a read-only URL with others. Every time you edit the page, it sends your edits to the server, and the server runs your garden continuously.
http://xkcd.com/1663/#55944f62-fa9b-11e5-8001-42010a8e0010
When you load a URL that already has a fragment, it loads up that specific game, and the controls if you‚Äôre accessing it from the original browser.




More dumb fun web stuff
The best parallax visualization I‚Äôve ever seen:
http://keithclark.co.uk/articles/pure-css-parallax-websites/demo3/

If you want to use parallax, use skrollr (https://github.com/Prinzhorn/skrollr)

Don‚Äôt use skrollr - complete nightmare to get set up. More later in the slides.


Notes on the end of class
On April 27th at 8pm (1 week after the class ends), report cards get sent to Arieann, for internship placement services.
Report cards include grades on all assignments, attendance, and links to projects (Client, Lorem Ipsum, and Portfolio)
Remember to check your grades with grades!
Remember to create separate firebase apps for your projects (and that they‚Äôre submitted to the grader for the right assignments), so that potential employers can see them!

Internships?
You don‚Äôt have to do this right now, but if you‚Äôre interested, be sure to do it before April 27th at 8pm.

If you‚Äôre interested in Spark‚Äôs help with finding an internship, fill out this form, and select the ‚Äúseeking an internship‚Äù option! Fill out all the other stuff too.
http://goo.gl/forms/uhKBIJHhzU
For each student, I usually send a short recommendation to Arieann (along with report cards). If you‚Äôre selected for internship placement services, she‚Äôll get in touch with you via email.


Get a job!
Usually get 5-10 leads a week through the CU CS jobs list!

http://www.colorado.edu/cs/job-opportunities/jobs-mailing-list


Students: Apply for Startup Summer!
http://www.startupcolorado.com/

Google tour details
The guy hasn‚Äôt gotten back to me yet - not sure if it‚Äôs going to happen :(

(tentative morning of April 25th?)



Tonight
on Front End Web Development:


Portfolios, part 2!

What to submit
Assignments 17 & 18: Submit a couple versions of your portfolio page.
Assignment 19: Submit the final version of your portfolio page.

Create a separate Firebase app to host your portfolio page, and keep it live after the class ends! We want to make sure that potential employers can see it.

The URL that you submit for assignment 19 gets sent along with your report card.

How are portfolio sites going?
Anyone want to show off progress so far?

Parallax time!
Parallax is hard. (much harder than I thought!)

Your two best options are using pure CSS or Stellar.js.

Another option is ScrollMagic or skrollr, but they‚Äôre pretty complicated.

Parallax: the pure CSS option
Go through this entire article, word-for-word:
http://keithclark.co.uk/articles/pure-css-parallax-websites/
Advantages:
No javascript!
Literally setting the 3d position of elements
Disadvantages:
Can‚Äôt have overlapping divs - have to position everything very carefully
Mobile support doesn‚Äôt respect scroll momentum

Parallax: the Stellar.js option
Check the docs: http://markdalgleish.com/projects/stellar.js/docs/
It‚Äôs a jQuery plugin!
Advantages:
Works with mobile pretty well!
Simple setup
Disadvantages:
Images and ‚Äúviewports‚Äù have to be big enough
I was having some issues with horizontal offsets and mobile - little bit weird.


Let‚Äôs make some Parallaxed Pugs!
Pugs: https://trello.com/c/nEkA70xI/74-lecture-lab-porfolio-part-2


Parallaxed Pugs setup
Create an index.html
Go ahead and add 	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">, or otherwise you might end up with some Giant Pugs later



Parallaxed Pugs: The Puggening
.pug {
	background-position: center center;
	background-size: cover;
	background-repeat: no-repeat;
	background-attachment: fixed;
	height: 100vh; ‚Üê viewport height
	max-width: 100%;
}
.pug1 {
	background-image: url("/img/pug1.jpeg");
}

<h1>pugs pugs pugs pugs pugs</h1>
<div class="pug pug1"></div>
<h1 class="">oh my god look at all these pugs</h1>
<div class="pug pug2"></div>




Yay for pugs!
If you don‚Äôt care about the images actually moving, you‚Äôre all done! Hooray!

If you need the images to move, let‚Äôs use Stellar.js.

First, go out and download this: https://raw.githubusercontent.com/markdalgleish/stellar.js/master/jquery.stellar.min.js

Save it, and put it in your project folder

Pugpocalypse - including some scripts
In <head>:
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
<script src="/jquery.stellar.min.js"></script>
At the bottom of <body>:
<script>
	$.stellar({
		horizontalScrolling: false,
		responsive: true
	}); </script>


The Final Step
<div class="pug pug1" data-stellar-background-ratio="0.5"></div>




How to Learn
Web Development
Look stuff up on the internet
Make stuff
Repeat

Excelsior! üöÄ


Advanced Topics: Back End Web Development with Node.js!

What is Node?
You know how we can run JavaScript in the browser?
We can also run JavaScript in Node.js!

Things look a little different between the two:
In the browser, you get some builtin variables/objects, like document and window
In Node, you get a whole different bunch of builtin variables/objects, like fs and require
Node.js is built on top of the V8 JavaScript engine: gross details here

Using Node to run JavaScript
First, create a file named index.js

Then, add console.log(‚ÄúHello, this is running from Node.js!‚Äù); to your index.js

Finally, run node index.js

Marvel at your ultimate cosmic power!

What is Express?
We‚Äôll be using a library called express. (http://expressjs.com/)

Express makes it easier to send and receive HTTP requests. It can turn Node.js into a web server!

(Any time we request a webpage, or send information to a server, we use something called an HTTP request - the two main types of HTTP requests are GET and POST.)

Install Express
Navigate to a new project folder!

Run:
npm init (then just hit enter a bunch)
npm install express --save

Note: while it will work without it, --save is required for deploying to Modulus (more on that later)

Including Express in our project
Inside index.js:

var express = require(‚Äúexpress‚Äù);

Run it again (node index.js), just to be sure that it‚Äôs right.

Telling express to be a web server!
var app = express();
// we‚Äôll put some other code here
app.listen(process.env.PORT || 3000);

This tells express to start listening on port 3000 (or, whatever port Modulus assigns. More on Modulus later)
Run the script again - what happens on the command line?
(ctrl-C quits)



Receiving HTTP requests
Before app.listen(process.env.PORT || 3000):

app.get("/", function(request, response) {
	console.log("hey! something happened!");
})

Restart your server (kill and rerun node index.js), then open a browser and go to http://localhost:3000/. What happens?

Sending data back in response
app.get("/", function(request, response) {
	console.log("hey! something happened!");
	response.send("client says what?");
})

Note that you have to restart your script every time!

Getting info from the URL
Add a second app.get call:

app.get("/hello/:name", function(request, response) {
	response.send("Hello, " + request.params.name + "!")
})

Restart, and go to http://localhost:3000/hello/yourname. What happens?

Deploying to Modulus
We‚Äôre going to use Modulus to host our Node.js code. It‚Äôs a little like Firebase!

https://modulus.io/

Normally it‚Äôs not free, but they give you a $15 credit when you sign up, and they don‚Äôt require payment info.
That should be enough to host a tiny server full-time for 2 months - more than enough for what we‚Äôre doing in the class!

Install the Modulus command line tools:
npm install modulus -g

If you get an error with that, try:

sudo npm install modulus -g

Sign up for Modulus
Run modulus signup, and follow the prompts

(pretty cool that you can sign up from the command line, right?)

Create a new Modulus project
Navigate to your project folder, then run modulus project create.

Name it whatever you like!
When asked for the runtime, select Node.js.
When asked for the servo size, enter 192.


Deploy your Node.js app to Modulus
In your project folder, run modulus deploy, and confirm that you‚Äôre deploying the right app.
(then sit and wait for a minute or two)

Navigate to your app (something like http://yourappnamehere-12345.onmodulus.net) and check that everything is working as expected.

Marvel at your unlimited cosmic power!

Debugging Modulus
If your Modulus stuff isn‚Äôt working, try running modulus logs. It might give you a clue as to what‚Äôs broken!

Are you in the right directory?
Did you run npm init and npm install express --save in the right directory?
Did you run modulus deploy from the right directory?

Assignment 16
Create a tiny Node.js web server that‚Äôs accessible from the internet! (use Modulus!)

Your server needs to respond to ‚Äú/hello/world‚Äù with ‚ÄúHello, world!‚Äù
(it also needs to respond to other names, too!)

Check out the card on the syllabus for more info.
